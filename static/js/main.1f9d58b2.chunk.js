(this["webpackJsonpbook-suggestion"]=this["webpackJsonpbook-suggestion"]||[]).push([[0],{110:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(42),c=n.n(o),s=(n(54),n(24)),l=n(2),i=n.n(l),u=n(7),m=n(43),p=n(44),g=n(48),d=n(47),h=(n(56),n(15)),f=n.n(h),b=function(){var e=new Date;return new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString().split("T")[0]},v=function(){for(var e=["2008-06-08"],t=2009;t<=(new Date).getFullYear();t++)e.push(t+"-01-01");return e[Math.floor(Math.random()*e.length)]},y="https://api.nytimes.com/svc/books/v3",k=function(e){return"/lists/".concat(e,"/Hardcover fiction.json")},w=function(e){return"/lists/".concat(e,"/Hardcover nonfiction.json")},E="?api-key=yIY9ATTla1XKYKfDb1cb9pMz4kXKMiJK",x=function(){var e=Object(u.a)(i.a.mark((function e(t,n){var a,r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=b()),console.log("4 - category fetchdatanyyear"),console.log(n),console.log(0==n),a=0==n?y+k(t)+E:y+w(t)+E,console.log("-url: "+a+" category: "+n),e.prev=6,e.next=9,f.a.get(a);case 9:return r=e.sent,o=r.data.results.books,e.abrupt("return",o.map((function(e){return{primary_isbn10:e.primary_isbn10,publisher:e.publisher,description:e.description,title:e.title,author:e.author,book_image:e.book_image}})));case 14:return e.prev=14,e.t0=e.catch(6),console.log("error fetchDataNy: ".concat(e.t0)),e.abrupt("return",e.t0);case 18:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t,n){return e.apply(this,arguments)}}(),_=function(){var e=Object(u.a)(i.a.mark((function e(t,n){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(t,n);case 2:return a=e.sent,e.abrupt("return",a[Math.floor(Math.random()*a.length)]);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),j=(n(34),function(){var e=Object(u.a)(i.a.mark((function e(t){var a,r,o,c,s,l,u,m,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t){e.next=2;break}return e.abrupt("return",Error("No isbn"));case 2:return a="https://cors-anywhere.herokuapp.com/https://www.goodreads.com/book/isbn/"+t+"?key=fXXuZUfpuJYz30B262BBg",console.log("goodreads url ".concat(a)),e.prev=4,e.next=7,f.a.get(a);case 7:return r=e.sent,o=r.data,c=n(34),s=o,l={compact:!0},u=c.xml2js(s,l),m=u.GoodreadsResponse.book,p={grRating:m.average_rating._text,numPages:m.num_pages._cdata,reviews:m.reviews_widget._cdata,url:m.url._cdata},e.abrupt("return",p);case 17:return e.prev=17,e.t0=e.catch(4),console.log("error fetchDataGr: ".concat(e.t0)),e.abrupt("return",e.t0);case 21:case"end":return e.stop()}}),e,null,[[4,17]])})));return function(t){return e.apply(this,arguments)}}()),O=n(112),N=function(e){return r.a.createElement(O.a,{className:"w-75 mx-auto card-no-border"},r.a.createElement(O.a.Img,{className:"card-img-top mx-auto",src:e.book.book_image}),r.a.createElement(O.a.Body,null,r.a.createElement(O.a.Title,null,r.a.createElement("a",{target:"_blank",href:e.book.url},"Title: ",e.book.title)),r.a.createElement(O.a.Text,null,"Author: ",e.book.author,r.a.createElement("br",null),"Rating: ",e.book.grRating,r.a.createElement("br",null),"Pages: ",e.book.numPages,r.a.createElement("br",null)),r.a.createElement(O.a.Text,null,"Description: ",e.book.description),r.a.createElement(O.a.Text,{dangerouslySetInnerHTML:{__html:(t=e.book.reviews,t.substring(t.indexOf("<iframe")))}})));var t},B=function(e){return r.a.createElement("footer",{className:"text-center p-1 m-0 bg-footer"},r.a.createElement("h6",{className:"p-0 m-0"},"Data provided by:\xa0",r.a.createElement("a",{href:"https://developer.nytimes.com/"},r.a.createElement("img",{src:"https://developer.nytimes.com/files/poweredby_nytimes_30b.png?v=1583354208352"})),r.a.createElement("a",{href:"https://www.goodreads.com/api"},r.a.createElement("img",{src:"http://d.gr-assets.com/misc/1454549125-1454549125_goodreads_misc.png"})),"\xa0 | An open source created by: ",r.a.createElement("a",{href:"https://github.com/sylleryum"},"https://github.com/sylleryum")))},C=function(e){var t=e.handler;e.current;return r.a.createElement("div",{fluid:!0,className:"mx-auto header"},r.a.createElement("h3",null,"I want a",r.a.createElement("select",{name:"seBooks",id:"seBooks",className:"rounded-lg border-0",onChange:function(e){t(e.target.value),document.getElementById("seBooks").selectedIndex=0}},r.a.createElement("option",{value:999,disabled:!0,selected:!0,style:{display:"none"}},"Non-fiction"),r.a.createElement("option",{value:0},"Fiction"),r.a.createElement("option",{value:1},"Non-Fiction")),"Best-selling book"))},M=n(45),T=n.n(M),I=function(e){var t=e.loading,n=e.message;return t?r.a.createElement("div",{className:"overlay-content"},r.a.createElement("div",{className:"wrapper"},r.a.createElement(T.a,{name:"ball-scale-ripple",fadeIn:"none",color:"white"}),r.a.createElement("span",{className:"message"},n))):null},D=n(46),S=n(111),A=function(e){Object(g.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={loading:!0,bookCategory:Math.floor(2*Math.random()),book:{author:"",book_image:"",description:"",grRating:"",numPages:"",primary_isbn10:"",publisher:"",reviews:"",title:"",url:""}},e.handleBookCategory=function(){var t=Object(u.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("1 - handler"),console.log(n),e.setState({bookCategory:n,loading:!0},(function(){console.log("2 - current state inside handler"),console.log(e.state),e.apiCalls()}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apiCalls();case 2:console.log("current state"),console.log(this.state);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"apiCalls",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("3 - state category?"),console.log(this.state.bookCategory),e.next=4,_(v(),this.state.bookCategory);case 4:return t=e.sent,e.next=7,j(t.primary_isbn10);case 7:n=e.sent,this.setState({loading:!1,book:Object(s.a)(Object(s.a)({},t),n)});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(a.Fragment,null,r.a.createElement(D.a,{className:"rounded",id:"mainContainer",direction:"column",alignItems:"center",justify:"center",style:{textAlign:"center"}},r.a.createElement(I,{loading:this.state.loading,message:"Getting your book..."}),r.a.createElement(S.a,null,r.a.createElement(C,{handler:this.handleBookCategory,current:this.state.bookCategory})),r.a.createElement(S.a,null,r.a.createElement(N,{book:this.state.book}))),r.a.createElement(B,null))}}]),n}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},49:function(e,t,n){e.exports=n(110)},54:function(e,t,n){},56:function(e,t,n){},77:function(e,t){},79:function(e,t){}},[[49,1,2]]]);
//# sourceMappingURL=main.1f9d58b2.chunk.js.map