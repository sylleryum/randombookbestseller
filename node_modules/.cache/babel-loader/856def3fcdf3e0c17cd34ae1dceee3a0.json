{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Eclipse\\\\React\\\\book-suggestion\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Eclipse\\\\React\\\\book-suggestion\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import axios from'axios';import*as convert from\"xml-js\";var endPoint=\"https://www.goodreads.com/book/isbn/\";var key=\"?key=fXXuZUfpuJYz30B262BBg\";var corsProxy=\"https://thingproxy.freeboard.io/fetch/\";/*\r\nvar convert = require('xml-js');\r\nvar xml = require('fs').readFileSync('test.xml', 'utf8');\r\nvar options = {ignoreComment: true, alwaysChildren: true};\r\nvar result = convert.xml2js(xml, options); // or convert.xml2json(xml, options)\r\nconsole.log(result);\r\n */ //https://www.goodreads.com/book/isbn/0316037915?key=fXXuZUfpuJYz30B262BBg\nexport var fetchDataGr=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(isbn){var url,_yield$axios$get,data,_convert,xml,options,_convert$xml2js,book,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(isbn===undefined)){_context.next=2;break;}return _context.abrupt(\"return\",Error(\"No isbn\"));case 2:url=corsProxy+endPoint+isbn+key;_context.prev=3;_context.next=6;return axios.get(url);case 6:_yield$axios$get=_context.sent;data=_yield$axios$get.data;_convert=require('xml-js');xml=data;options={compact:true};_convert$xml2js=_convert.xml2js(xml,options),book=_convert$xml2js.GoodreadsResponse.book;result={grRating:book.average_rating._text,numPages:book.num_pages._cdata,reviews:book.reviews_widget._cdata,url:book.url._cdata};// console.log(`fetchDataGr`)\n// console.log(book);\nreturn _context.abrupt(\"return\",result);case 16:_context.prev=16;_context.t0=_context[\"catch\"](3);console.log(\"error fetchDataGr: \".concat(_context.t0));return _context.abrupt(\"return\",_context.t0);case 20:case\"end\":return _context.stop();}}},_callee,null,[[3,16]]);}));return function fetchDataGr(_x){return _ref.apply(this,arguments);};}();","map":{"version":3,"sources":["C:/Eclipse/React/book-suggestion/src/api/fetchDataGr.js"],"names":["axios","convert","endPoint","key","corsProxy","fetchDataGr","isbn","undefined","Error","url","get","data","require","xml","options","compact","xml2js","book","GoodreadsResponse","result","grRating","average_rating","_text","numPages","num_pages","_cdata","reviews","reviews_widget","console","log"],"mappings":"2TAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,GAAKC,CAAAA,OAAZ,KAAyB,QAAzB,CAEA,GAAMC,CAAAA,QAAQ,CAAG,sCAAjB,CACA,GAAMC,CAAAA,GAAG,CAAG,4BAAZ,CACA,GAAMC,CAAAA,SAAS,CAAG,wCAAlB,CAEA;;;;;;IAQA;AACA,MAAO,IAAMC,CAAAA,WAAW,0FAAG,iBAAOC,IAAP,sMACnBA,IAAI,GAAKC,SADU,0DAEZC,KAAK,CAAC,SAAD,CAFO,SAIjBC,GAJiB,CAIXL,SAAS,CAAGF,QAAZ,CAAuBI,IAAvB,CAA8BH,GAJnB,uCAMEH,CAAAA,KAAK,CAACU,GAAN,CAAUD,GAAV,CANF,uCAMZE,IANY,kBAMZA,IANY,CAObV,QAPa,CAOHW,OAAO,CAAC,QAAD,CAPJ,CAQbC,GARa,CAQPF,IARO,CASbG,OATa,CASH,CAACC,OAAO,CAAE,IAAV,CATG,iBAUgBd,QAAO,CAACe,MAAR,CAAeH,GAAf,CAAoBC,OAApB,CAVhB,CAUOG,IAVP,iBAUZC,iBAVY,CAUOD,IAVP,CAWbE,MAXa,CAWJ,CACXC,QAAQ,CAACH,IAAI,CAACI,cAAL,CAAoBC,KADlB,CAEXC,QAAQ,CAACN,IAAI,CAACO,SAAL,CAAeC,MAFb,CAGXC,OAAO,CAACT,IAAI,CAACU,cAAL,CAAoBF,MAHjB,CAIXhB,GAAG,CAACQ,IAAI,CAACR,GAAL,CAASgB,MAJF,CAXI,CAiBnB;AACA;AAlBmB,gCAmBZN,MAnBY,4DAqBnBS,OAAO,CAACC,GAAR,4CArBmB,kHAAH,kBAAXxB,CAAAA,WAAW,4CAAjB","sourcesContent":["import axios from 'axios';\r\nimport * as convert from \"xml-js\";\r\n\r\nconst endPoint = \"https://www.goodreads.com/book/isbn/\"\r\nconst key = \"?key=fXXuZUfpuJYz30B262BBg\"\r\nconst corsProxy = \"https://thingproxy.freeboard.io/fetch/\"\r\n\r\n/*\r\nvar convert = require('xml-js');\r\nvar xml = require('fs').readFileSync('test.xml', 'utf8');\r\nvar options = {ignoreComment: true, alwaysChildren: true};\r\nvar result = convert.xml2js(xml, options); // or convert.xml2json(xml, options)\r\nconsole.log(result);\r\n */\r\n\r\n//https://www.goodreads.com/book/isbn/0316037915?key=fXXuZUfpuJYz30B262BBg\r\nexport const fetchDataGr = async (isbn) => {\r\n    if (isbn === undefined) {\r\n        return Error(\"No isbn\");\r\n    }\r\n    const url = corsProxy + endPoint + isbn + key\r\n    try {\r\n        const {data} = await axios.get(url);\r\n        const convert = require('xml-js');\r\n        const xml = data\r\n        const options = {compact: true};\r\n        const {GoodreadsResponse:{book}} = convert.xml2js(xml, options);\r\n        const result = {\r\n            grRating:book.average_rating._text,\r\n            numPages:book.num_pages._cdata,\r\n            reviews:book.reviews_widget._cdata,\r\n            url:book.url._cdata\r\n        }\r\n        // console.log(`fetchDataGr`)\r\n        // console.log(book);\r\n        return result;\r\n    } catch (error) {\r\n        console.log(`error fetchDataGr: ${error}`)\r\n        return error;\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}