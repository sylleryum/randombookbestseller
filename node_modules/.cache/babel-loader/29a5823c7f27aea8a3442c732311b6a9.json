{"ast":null,"code":"import axios from 'axios';\nimport * as convert from \"xml-js\";\nconst endPoint = \"https://www.goodreads.com/book/isbn/\";\nconst key = \"?key=fXXuZUfpuJYz30B262BBg\";\nconst corsProxy = \"https://thingproxy.freeboard.io/fetch/\";\n/*\r\nvar convert = require('xml-js');\r\nvar xml = require('fs').readFileSync('test.xml', 'utf8');\r\nvar options = {ignoreComment: true, alwaysChildren: true};\r\nvar result = convert.xml2js(xml, options); // or convert.xml2json(xml, options)\r\nconsole.log(result);\r\n */\n//https://www.goodreads.com/book/isbn/0316037915?key=fXXuZUfpuJYz30B262BBg\n\nexport const fetchDataGr = async isbn => {\n  if (isbn === undefined) {\n    return Error(\"No isbn\");\n  }\n\n  const url = corsProxy + endPoint + isbn + key;\n\n  try {\n    const {\n      data\n    } = await axios.get(url);\n\n    var convert = require('xml-js');\n\n    var xml = require('fs').readFileSync(data, 'utf8');\n\n    var options = {\n      ignoreComment: true,\n      alwaysChildren: true\n    };\n    var result = convert.xml2js(xml, options);\n    console.log(`goodreads`); //console.log(data)\n    //const test = convert.xml2json(data.data, {compact: true, spaces: 4});\n\n    console.log(result);\n  } catch (error) {\n    console.log(`error ${error}`);\n    return error;\n  }\n};","map":{"version":3,"sources":["c:/eclipse/react/book-suggestion/src/api/fetchDataGr.js"],"names":["axios","convert","endPoint","key","corsProxy","fetchDataGr","isbn","undefined","Error","url","data","get","require","xml","readFileSync","options","ignoreComment","alwaysChildren","result","xml2js","console","log","error"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,KAAKC,OAAZ,MAAyB,QAAzB;AAEA,MAAMC,QAAQ,GAAG,sCAAjB;AACA,MAAMC,GAAG,GAAG,4BAAZ;AACA,MAAMC,SAAS,GAAG,wCAAlB;AAEA;;;;;;;AAQA;;AACA,OAAO,MAAMC,WAAW,GAAG,MAAOC,IAAP,IAAgB;AACvC,MAAIA,IAAI,KAAKC,SAAb,EAAwB;AACpB,WAAOC,KAAK,CAAC,SAAD,CAAZ;AACH;;AACD,QAAMC,GAAG,GAAGL,SAAS,GAAGF,QAAZ,GAAuBI,IAAvB,GAA8BH,GAA1C;;AACA,MAAI;AACA,UAAM;AAACO,MAAAA;AAAD,QAAS,MAAMV,KAAK,CAACW,GAAN,CAAUF,GAAV,CAArB;;AACA,QAAIR,OAAO,GAAGW,OAAO,CAAC,QAAD,CAArB;;AACA,QAAIC,GAAG,GAAGD,OAAO,CAAC,IAAD,CAAP,CAAcE,YAAd,CAA2BJ,IAA3B,EAAiC,MAAjC,CAAV;;AACA,QAAIK,OAAO,GAAG;AAACC,MAAAA,aAAa,EAAE,IAAhB;AAAsBC,MAAAA,cAAc,EAAE;AAAtC,KAAd;AACA,QAAIC,MAAM,GAAGjB,OAAO,CAACkB,MAAR,CAAeN,GAAf,EAAoBE,OAApB,CAAb;AAEAK,IAAAA,OAAO,CAACC,GAAR,CAAa,WAAb,EAPA,CAQA;AACA;;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAYH,MAAZ;AACH,GAXD,CAWE,OAAOI,KAAP,EAAc;AACZF,IAAAA,OAAO,CAACC,GAAR,CAAa,SAAQC,KAAM,EAA3B;AACA,WAAOA,KAAP;AACH;AACJ,CApBM","sourcesContent":["import axios from 'axios';\r\nimport * as convert from \"xml-js\";\r\n\r\nconst endPoint = \"https://www.goodreads.com/book/isbn/\"\r\nconst key = \"?key=fXXuZUfpuJYz30B262BBg\"\r\nconst corsProxy = \"https://thingproxy.freeboard.io/fetch/\"\r\n\r\n/*\r\nvar convert = require('xml-js');\r\nvar xml = require('fs').readFileSync('test.xml', 'utf8');\r\nvar options = {ignoreComment: true, alwaysChildren: true};\r\nvar result = convert.xml2js(xml, options); // or convert.xml2json(xml, options)\r\nconsole.log(result);\r\n */\r\n\r\n//https://www.goodreads.com/book/isbn/0316037915?key=fXXuZUfpuJYz30B262BBg\r\nexport const fetchDataGr = async (isbn) => {\r\n    if (isbn === undefined) {\r\n        return Error(\"No isbn\");\r\n    }\r\n    const url = corsProxy + endPoint + isbn + key\r\n    try {\r\n        const {data} = await axios.get(url);\r\n        var convert = require('xml-js');\r\n        var xml = require('fs').readFileSync(data, 'utf8');\r\n        var options = {ignoreComment: true, alwaysChildren: true};\r\n        var result = convert.xml2js(xml, options)\r\n\r\n        console.log(`goodreads`)\r\n        //console.log(data)\r\n        //const test = convert.xml2json(data.data, {compact: true, spaces: 4});\r\n        console.log(result)\r\n    } catch (error) {\r\n        console.log(`error ${error}`)\r\n        return error;\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}