{"ast":null,"code":"import axios from 'axios';\nconst endPoint = 'https://api.nytimes.com/svc/books/v3';\n\nconst fiction = date => `/lists/${date}/Hardcover Nonfiction.json`;\n\nconst key = '?api-key=yIY9ATTla1XKYKfDb1cb9pMz4kXKMiJK'; //documentation: https://gogapidocs.readthedocs.io/en/latest/account.html#games-movies\n\n/**\r\n *\r\n * @returns {today's date formatted as yyyy-mm-dd}\r\n */\n\nconst getTodayDataFormatted = () => {\n  const date = new Date();\n  const dateString = new Date(date.getTime() - date.getTimezoneOffset() * 60000).toISOString().split(\"T\")[0];\n  return dateString;\n};\n\nexport const getRandomDateNonFiction = () => {\n  const dates = [\"2008-06-08\", \"2009-01-01\", \"2010-01-01\", \"2011-01-01\", \"2012-01-01\", \"2013-01-01\", \"2014-01-01\", \"2015-01-01\", \"2016-01-01\", \"2017-01-01\", \"2018-01-01\", \"2019-01-01\", \"2020-01-01\", getTodayDataFormatted()];\n  const randomPublicationDate = dates[Math.floor(Math.random() * dates.length)];\n  console.log(`randomPublicationDate ${randomPublicationDate}`);\n  return randomPublicationDate;\n};\n/**\r\n *\r\n * @param date date of the publication, should be in the format yyyy-mm-dd (getTodayDataFormatted() returns in this format)\r\n * @returns {Promise<*>}\r\n */\n\nconst fetchDataNy = async date => {\n  if (date === undefined) {\n    date = getTodayDataFormatted();\n  }\n\n  const url = endPoint + fiction(\"2020-01-01\") + key;\n  console.log(\"url: \" + url);\n\n  try {\n    const {\n      data: {\n        results: {\n          books\n        }\n      }\n    } = await axios.get(url); //console.log(books)\n\n    return books;\n  } catch (error) {\n    console.log(`error ${error}`);\n    return error;\n  }\n};\n\nexport default fetchDataNy;","map":{"version":3,"sources":["c:/eclipse/react/book-suggestion/src/api/fetchDataNy.js"],"names":["axios","endPoint","fiction","date","key","getTodayDataFormatted","Date","dateString","getTime","getTimezoneOffset","toISOString","split","getRandomDateNonFiction","dates","randomPublicationDate","Math","floor","random","length","console","log","fetchDataNy","undefined","url","data","results","books","get","error"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,MAAMC,QAAQ,GAAG,sCAAjB;;AACA,MAAMC,OAAO,GAAIC,IAAD,IAAW,UAASA,IAAK,4BAAzC;;AACA,MAAMC,GAAG,GAAG,2CAAZ,C,CACA;;AAEA;;;;;AAIA,MAAMC,qBAAqB,GAAG,MAAM;AAChC,QAAMF,IAAI,GAAG,IAAIG,IAAJ,EAAb;AACA,QAAMC,UAAU,GAAG,IAAID,IAAJ,CAASH,IAAI,CAACK,OAAL,KAAkBL,IAAI,CAACM,iBAAL,KAA2B,KAAtD,EACdC,WADc,GAEdC,KAFc,CAER,GAFQ,EAEH,CAFG,CAAnB;AAGA,SAAOJ,UAAP;AACH,CAND;;AAQA,OAAO,MAAMK,uBAAuB,GAAG,MAAM;AACzC,QAAMC,KAAK,GAAG,CAAC,YAAD,EAAe,YAAf,EAA6B,YAA7B,EAA2C,YAA3C,EAAyD,YAAzD,EAAuE,YAAvE,EACV,YADU,EACI,YADJ,EACkB,YADlB,EACgC,YADhC,EAC8C,YAD9C,EAC4D,YAD5D,EAC0E,YAD1E,EACwFR,qBAAqB,EAD7G,CAAd;AAEA,QAAMS,qBAAqB,GAAGD,KAAK,CAACE,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgBJ,KAAK,CAACK,MAAjC,CAAD,CAAnC;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAa,yBAAwBN,qBAAsB,EAA3D;AACA,SAAOA,qBAAP;AACH,CANM;AAQP;;;;;;AAKA,MAAMO,WAAW,GAAG,MAAOlB,IAAP,IAAgB;AAChC,MAAIA,IAAI,KAAKmB,SAAb,EAAwB;AACpBnB,IAAAA,IAAI,GAAGE,qBAAqB,EAA5B;AACH;;AACD,QAAMkB,GAAG,GAAGtB,QAAQ,GAAGC,OAAO,CAAC,YAAD,CAAlB,GAAmCE,GAA/C;AACAe,EAAAA,OAAO,CAACC,GAAR,CAAY,UAAUG,GAAtB;;AACA,MAAI;AACA,UAAM;AAACC,MAAAA,IAAI,EAAE;AAACC,QAAAA,OAAO,EAAE;AAACC,UAAAA;AAAD;AAAV;AAAP,QAA6B,MAAM1B,KAAK,CAAC2B,GAAN,CAAUJ,GAAV,CAAzC,CADA,CAEA;;AACA,WAAOG,KAAP;AACH,GAJD,CAIE,OAAOE,KAAP,EAAc;AACZT,IAAAA,OAAO,CAACC,GAAR,CAAa,SAAQQ,KAAM,EAA3B;AAEA,WAAOA,KAAP;AACH;AACJ,CAfD;;AAiBA,eAAeP,WAAf","sourcesContent":["import axios from 'axios';\r\n\r\nconst endPoint = 'https://api.nytimes.com/svc/books/v3';\r\nconst fiction = (date) => `/lists/${date}/Hardcover Nonfiction.json`\r\nconst key = '?api-key=yIY9ATTla1XKYKfDb1cb9pMz4kXKMiJK'\r\n//documentation: https://gogapidocs.readthedocs.io/en/latest/account.html#games-movies\r\n\r\n/**\r\n *\r\n * @returns {today's date formatted as yyyy-mm-dd}\r\n */\r\nconst getTodayDataFormatted = () => {\r\n    const date = new Date();\r\n    const dateString = new Date(date.getTime() - (date.getTimezoneOffset() * 60000))\r\n        .toISOString()\r\n        .split(\"T\")[0];\r\n    return dateString\r\n};\r\n\r\nexport const getRandomDateNonFiction = () => {\r\n    const dates = [\"2008-06-08\", \"2009-01-01\", \"2010-01-01\", \"2011-01-01\", \"2012-01-01\", \"2013-01-01\",\r\n        \"2014-01-01\", \"2015-01-01\", \"2016-01-01\", \"2017-01-01\", \"2018-01-01\", \"2019-01-01\", \"2020-01-01\", getTodayDataFormatted()]\r\n    const randomPublicationDate = dates[Math.floor(Math.random() * dates.length)]\r\n    console.log(`randomPublicationDate ${randomPublicationDate}`)\r\n    return randomPublicationDate\r\n}\r\n\r\n/**\r\n *\r\n * @param date date of the publication, should be in the format yyyy-mm-dd (getTodayDataFormatted() returns in this format)\r\n * @returns {Promise<*>}\r\n */\r\nconst fetchDataNy = async (date) => {\r\n    if (date === undefined) {\r\n        date = getTodayDataFormatted();\r\n    }\r\n    const url = endPoint + fiction(\"2020-01-01\") + key;\r\n    console.log(\"url: \" + url)\r\n    try {\r\n        const {data: {results: {books}}} = await axios.get(url);\r\n        //console.log(books)\r\n        return books;\r\n    } catch (error) {\r\n        console.log(`error ${error}`)\r\n\r\n        return error;\r\n    }\r\n}\r\n\r\nexport default fetchDataNy\r\n"]},"metadata":{},"sourceType":"module"}